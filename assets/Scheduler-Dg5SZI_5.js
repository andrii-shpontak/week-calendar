import{d as _,c as g,a as h,F as m,r as w,u as H,o as S,t as A,e as J,n as k,f,w as L,_ as R,g as I,h as F}from"./index-CT6s9y59.js";var D=(t=>(t.Scheduler="scheduler",t))(D||{});const T="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%2024%2024'%20xml:space='preserve'%20width='800px'%20height='800px'%20stroke='none'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke='%23fff'%20stroke-width='0.048'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:none;}%20%3c/style%3e%3cpath%20d='M12,2C6.5,2,2,6.5,2,12s4.5,10,10,10s10-4.5,10-10S17.5,2,12,2z%20M10.8,16.8l-3.7-3.7l1.4-1.4l2.2,2.2l5.8-6.1L18,9.3%20L10.8,16.8z'/%3e%3crect%20class='st0'%20width='24'%20height='24'/%3e%3c/g%3e%3c/svg%3e";class B{static setItem(e,d){return localStorage.setItem(e,W(d))}static getItem(e){return localStorage.getItem(e)}static removeItem(e){localStorage.removeItem(e)}static clear(){localStorage.clear()}}function W(t){return t===null&&t===void 0?"":typeof t=="string"?t:JSON.stringify(t)}const N=B.getItem(D.Scheduler),x=N?JSON.parse(N):{mo:[{bt:240,et:779}],tu:[],we:[],th:[{bt:240,et:779},{bt:1140,et:1319}],fr:[{bt:660,et:1019}],sa:[{bt:0,et:1439}],su:[]},E=["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00"],j={class:"grid grid-cols-[3rem_3rem_repeat(8,_1fr)]"},z={class:"grid grid-rows-7 gap-2"},P={class:"uppercase text-center border-r p-2 text-slate-500"},U=["onClick"],$={key:0,src:T,alt:"selected_icon",class:"w-8 h-8"},q={class:"grid grid-cols-[repeat(24,_1fr)] gap-1"},Y=["onMousedown","onMouseenter"],Q=_({name:"WeekCalendar"}),X=_({...Q,props:{days:{},hours:{},isHourSelected:{type:Function},toggleAllDay:{type:Function},startSelection:{type:Function},dragSelection:{type:Function},endSelection:{type:Function},isAllDaySelected:{type:Function}},setup(t){const e=t;return(d,s)=>(S(),g("div",null,[h("div",j,[s[1]||(s[1]=h("div",null,null,-1)),s[2]||(s[2]=h("div",{class:"uppercase pb-2 text-center"},"all day",-1)),(S(!0),g(m,null,w(H(E),(c,o)=>(S(),g("div",{key:o,class:"border-l text-center pb-4"},A(c),1))),128))]),h("div",z,[(S(!0),g(m,null,w(e.days,(c,o)=>(S(),g("div",{key:o,class:"grid grid-cols-[3rem_3rem_1fr] border"},[h("div",P,A(o),1),h("div",{class:"font-bold border-r cursor-pointer bg-gray-500 flex justify-center items-center",onClick:a=>e.toggleAllDay(o)},[e.isAllDaySelected(o)?(S(),g("img",$)):J("",!0)],8,U),h("div",q,[(S(!0),g(m,null,w(e.hours,a=>(S(),g("div",{key:a,class:k(["h-10 text-center leading-10 cursor-pointer bg-gray-200 hour-slot",{"bg-green-600 text-white":e.isHourSelected(o,a)}]),onMousedown:i=>e.startSelection(o,a),onMouseenter:i=>e.dragSelection(o,a),onMouseup:s[0]||(s[0]=(...i)=>e.endSelection&&e.endSelection(...i))},null,42,Y))),128))])]))),128))])]))}}),Z={class:"flex gap-4 mt-4"},K=["disabled"],ee=["disabled"],te=_({name:"ScheduleButtons"}),se=_({...te,props:{resetSchedule:{type:Function},saveSchedule:{type:Function},isChanged:{type:Boolean}},setup(t){const e=t;return(d,s)=>(S(),g("div",Z,[h("button",{onClick:s[0]||(s[0]=(...c)=>e.resetSchedule&&e.resetSchedule(...c)),disabled:!e.isChanged,class:k(["px-4 py-2 rounded",e.isChanged?"bg-red-500 text-white":"bg-gray-400 text-gray-200 cursor-not-allowed"])}," Reset ",10,K),h("button",{onClick:s[1]||(s[1]=(...c)=>e.saveSchedule&&e.saveSchedule(...c)),disabled:!e.isChanged,class:k(["px-4 py-2 rounded",e.isChanged?"bg-green-500 text-white":"bg-gray-400 text-gray-200 cursor-not-allowed"])}," Save ",10,ee)]))}}),C=t=>JSON.parse(JSON.stringify(t)),le=(t,e)=>JSON.stringify(t)!==JSON.stringify(e),ne=()=>{const t=f(C(x)),e=f(!1),d=f(null),s=f(!1),c=()=>{t.value=C(C(x)),s.value=!1},o=()=>{B.setItem(D.Scheduler,t.value),window.location.reload()},a=Array.from({length:24},(l,n)=>n),i=(l,n)=>{const r=n*60;return t.value[l].some(p=>r>=p.bt&&r<=p.et)},b=l=>{const n=t.value[l].length===1&&t.value[l][0].bt===0&&t.value[l][0].et===1439;t.value[l]=n?[]:[{bt:0,et:1439}]},y=l=>{if(!l.length)return[];l.sort((r,u)=>r.bt-u.bt);let n=[l[0]];for(let r=1;r<l.length;r++){const u=l[r],p=n[n.length-1];u.bt<=p.et+1?p.et=Math.max(p.et,u.et):n.push(u)}return n},v=(l,n)=>{const r=n*60;let u=t.value[l];d.value==="select"?i(l,n)||(u.push({bt:r,et:r+59}),t.value[l]=y(u)):t.value[l]=u.filter(p=>!(r>=p.bt&&r<=p.et))},V=(l,n)=>{e.value=!0,d.value=i(l,n)?"deselect":"select",v(l,n)},M=(l,n)=>{e.value&&v(l,n)},G=()=>{e.value=!1,d.value=null},O=l=>{const n=t.value[l];return n.length===1&&n[0].bt===0&&n[0].et===1439};return L(t,l=>{s.value=le(l,x)},{deep:!0}),{days:t,hours:a,isHourSelected:i,toggleAllDay:b,startSelection:V,dragSelection:M,endSelection:G,resetSchedule:c,saveSchedule:o,isAllDaySelected:O,isChanged:s}},oe={components:{WeekCalendar:X,ScheduleButtons:se},setup(){const{days:t,hours:e,isHourSelected:d,toggleAllDay:s,startSelection:c,dragSelection:o,endSelection:a,resetSchedule:i,saveSchedule:b,isAllDaySelected:y,isChanged:v}=ne();return{days:t,hours:e,isHourSelected:d,toggleAllDay:s,startSelection:c,dragSelection:o,endSelection:a,resetSchedule:i,saveSchedule:b,isAllDaySelected:y,isChanged:v}}};function re(t,e,d,s,c,o){const a=F("WeekCalendar"),i=F("ScheduleButtons");return S(),g(m,null,[e[0]||(e[0]=h("h2",{class:"uppercase underline my-4 font-bold text-inherit text-slate-700"},"Set schedule",-1)),I(a,{days:s.days,hours:s.hours,isHourSelected:s.isHourSelected,toggleAllDay:s.toggleAllDay,startSelection:s.startSelection,dragSelection:s.dragSelection,endSelection:s.endSelection,isAllDaySelected:s.isAllDaySelected},null,8,["days","hours","isHourSelected","toggleAllDay","startSelection","dragSelection","endSelection","isAllDaySelected"]),I(i,{resetSchedule:s.resetSchedule,saveSchedule:s.saveSchedule,isChanged:s.isChanged},null,8,["resetSchedule","saveSchedule","isChanged"])],64)}const ae=R(oe,[["render",re]]);export{ae as default};
