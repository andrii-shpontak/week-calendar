import{d as m,c as u,a as S,F as f,r as y,u as G,o as g,t as D,e as H,n as k,f as _,w as O,_ as R,g as A,h as B}from"./index-BDo6iWwU.js";const T="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23ffffff'%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%2024%2024'%20xml:space='preserve'%20width='800px'%20height='800px'%20stroke='none'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke='%23fff'%20stroke-width='0.048'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:none;}%20%3c/style%3e%3cpath%20d='M12,2C6.5,2,2,6.5,2,12s4.5,10,10,10s10-4.5,10-10S17.5,2,12,2z%20M10.8,16.8l-3.7-3.7l1.4-1.4l2.2,2.2l5.8-6.1L18,9.3%20L10.8,16.8z'/%3e%3crect%20class='st0'%20width='24'%20height='24'/%3e%3c/g%3e%3c/svg%3e",w={mo:[{bt:240,et:779}],tu:[],we:[],th:[{bt:240,et:779},{bt:1140,et:1319}],fr:[{bt:660,et:1019}],sa:[{bt:0,et:1439}],su:[]},L=["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00"],W={class:"grid grid-cols-[3rem_3rem_repeat(8,_1fr)]"},E={class:"grid grid-rows-7 gap-2"},I={class:"uppercase text-center border-r p-2 text-slate-500"},J=["onClick"],j={key:0,src:T,alt:"selected_icon",class:"w-8 h-8"},z={class:"grid grid-cols-[repeat(24,_1fr)] gap-1"},P=["onMousedown","onMouseenter"],U=m({name:"WeekCalendar"}),$=m({...U,props:{days:{},hours:{},isHourSelected:{type:Function},toggleAllDay:{type:Function},startSelection:{type:Function},dragSelection:{type:Function},endSelection:{type:Function},isAllDaySelected:{type:Function}},setup(l){const e=l;return(p,t)=>(g(),u("div",null,[S("div",W,[t[1]||(t[1]=S("div",null,null,-1)),t[2]||(t[2]=S("div",{class:"uppercase pb-2 text-center"},"all day",-1)),(g(!0),u(f,null,y(G(L),(c,o)=>(g(),u("div",{key:o,class:"border-l text-center pb-4"},D(c),1))),128))]),S("div",E,[(g(!0),u(f,null,y(e.days,(c,o)=>(g(),u("div",{key:o,class:"grid grid-cols-[3rem_3rem_1fr] border"},[S("div",I,D(o),1),S("div",{class:"font-bold border-r cursor-pointer bg-gray-500 flex justify-center items-center",onClick:a=>e.toggleAllDay(o)},[e.isAllDaySelected(o)?(g(),u("img",j)):H("",!0)],8,J),S("div",z,[(g(!0),u(f,null,y(e.hours,a=>(g(),u("div",{key:a,class:k(["h-10 text-center leading-10 cursor-pointer bg-gray-200 hour-slot",{"bg-green-600 text-white":e.isHourSelected(o,a)}]),onMousedown:i=>e.startSelection(o,a),onMouseenter:i=>e.dragSelection(o,a),onMouseup:t[0]||(t[0]=(...i)=>e.endSelection&&e.endSelection(...i))},null,42,P))),128))])]))),128))])]))}}),q={class:"flex gap-4 mt-4"},Y=["disabled"],Q=["disabled"],X=m({name:"ScheduleButtons"}),Z=m({...X,props:{resetSchedule:{type:Function},saveSchedule:{type:Function},isChanged:{type:Boolean}},setup(l){const e=l;return(p,t)=>(g(),u("div",q,[S("button",{onClick:t[0]||(t[0]=(...c)=>e.resetSchedule&&e.resetSchedule(...c)),disabled:!e.isChanged,class:k(["px-4 py-2 rounded",e.isChanged?"bg-red-500 text-white":"bg-gray-400 text-gray-200 cursor-not-allowed"])}," Reset ",10,Y),S("button",{onClick:t[1]||(t[1]=(...c)=>e.saveSchedule&&e.saveSchedule(...c)),disabled:!e.isChanged,class:k(["px-4 py-2 rounded",e.isChanged?"bg-green-500 text-white":"bg-gray-400 text-gray-200 cursor-not-allowed"])}," Save ",10,Q)]))}}),C=l=>JSON.parse(JSON.stringify(l)),K=(l,e)=>JSON.stringify(l)!==JSON.stringify(e),ee=()=>{const l=_(C(w)),e=_(!1),p=_(null),t=_(!1),c=()=>{l.value=C(C(w)),t.value=!1},o=()=>{console.log("Current schedule:",l.value)},a=Array.from({length:24},(s,n)=>n),i=(s,n)=>{const r=n*60;return l.value[s].some(h=>r>=h.bt&&r<=h.et)},b=s=>{const n=l.value[s].length===1&&l.value[s][0].bt===0&&l.value[s][0].et===1439;l.value[s]=n?[]:[{bt:0,et:1439}]},x=s=>{if(!s.length)return[];s.sort((r,d)=>r.bt-d.bt);let n=[s[0]];for(let r=1;r<s.length;r++){const d=s[r],h=n[n.length-1];d.bt<=h.et+1?h.et=Math.max(h.et,d.et):n.push(d)}return n},v=(s,n)=>{const r=n*60;let d=l.value[s];p.value==="select"?i(s,n)||(d.push({bt:r,et:r+59}),l.value[s]=x(d)):l.value[s]=d.filter(h=>!(r>=h.bt&&r<=h.et))},F=(s,n)=>{e.value=!0,p.value=i(s,n)?"deselect":"select",v(s,n)},V=(s,n)=>{e.value&&v(s,n)},M=()=>{e.value=!1,p.value=null},N=s=>{const n=l.value[s];return n.length===1&&n[0].bt===0&&n[0].et===1439};return O(l,s=>{t.value=K(s,w)},{deep:!0}),{days:l,hours:a,isHourSelected:i,toggleAllDay:b,startSelection:F,dragSelection:V,endSelection:M,resetSchedule:c,saveSchedule:o,isAllDaySelected:N,isChanged:t}},te={components:{WeekCalendar:$,ScheduleButtons:Z},setup(){const{days:l,hours:e,isHourSelected:p,toggleAllDay:t,startSelection:c,dragSelection:o,endSelection:a,resetSchedule:i,saveSchedule:b,isAllDaySelected:x,isChanged:v}=ee();return{days:l,hours:e,isHourSelected:p,toggleAllDay:t,startSelection:c,dragSelection:o,endSelection:a,resetSchedule:i,saveSchedule:b,isAllDaySelected:x,isChanged:v}}};function se(l,e,p,t,c,o){const a=B("WeekCalendar"),i=B("ScheduleButtons");return g(),u(f,null,[e[0]||(e[0]=S("h2",{class:"uppercase underline my-4 font-bold text-inherit text-slate-700"},"Set schedule",-1)),A(a,{days:t.days,hours:t.hours,isHourSelected:t.isHourSelected,toggleAllDay:t.toggleAllDay,startSelection:t.startSelection,dragSelection:t.dragSelection,endSelection:t.endSelection,isAllDaySelected:t.isAllDaySelected},null,8,["days","hours","isHourSelected","toggleAllDay","startSelection","dragSelection","endSelection","isAllDaySelected"]),A(i,{resetSchedule:t.resetSchedule,saveSchedule:t.saveSchedule,isChanged:t.isChanged},null,8,["resetSchedule","saveSchedule","isChanged"])],64)}const ne=R(te,[["render",se]]);export{ne as default};
